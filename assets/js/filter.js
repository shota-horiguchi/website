function keywordSearch(e,r){var t,i=r.split(" ");for(t=0;t<i.length;t++)if(e.indexOf(i[t])<=-1)return!1;return!0}function filter(){var e=document.documentElement.scrollTop||document.body.scrollTop;$("html, body").animate({scrollTop:Math.min($("header").offset().top+$("header").outerHeight(!0),e)},0);var r=$("#filter-search").val().toLowerCase(),t=$("#filter-pubtype").val(),i=$("#filter-year").val(),l=$("#filter-first-author").prop("checked");$(".year-all").hide(),$(".year-all").find("li").hide(),$(i).show(),$(".pubtype-all").hide(),$(i+" "+t).show(),$(i+" "+t).find("li").show(),l?$(".co-author").parent().hide():$(".co-author").parent().show(),r.length>0&&$(".year-all li:visible").filter(function(){$(this).toggle(keywordSearch($(this).text().toLowerCase(),r))}).hide(),$(".year-all li:visible").hide().fadeIn(200),$(".year-all").each(function(){0==$(this).find("li:visible").length&&$(this).hide()})}var years,categories,filterByYear;window.onload=function(){$("#filter-search").keypress($.debounce(500,filter)),$("#filter-search").keyup($.debounce(500,function(e){46!=e.keyCode&&8!=e.keyCode||filter()})),$("#filter-search").on("search",filter),$("#filter-pubtype").change(filter),$("#filter-year").change(filter),$("#filter-first-author").change(filter)};